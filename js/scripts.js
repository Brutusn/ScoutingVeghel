function $I(a){return document.getElementById(a)}function $el(a){return document.createElement(a)}window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();
function removeClass(a){var c=document.getElementsByClassName(a),b;if(0!==c.length)if(1===c.length)c[0].classList.remove(a);else if(1<c.length)for(b=0;b<c.length;b++)c[b].classList.remove(a)}
var ajax=function(a,c,b){var d={};if("undefined"!==typeof XMLHttpRequest){var d=new XMLHttpRequest,e=[],f;for(f in c)e.push(encodeURIComponent(f)+"="+encodeURIComponent(c[f]));d.open("POST",a,!0);d.onreadystatechange=function(){4===d.readyState&&200===d.status&&b(d.responseText)};d.setRequestHeader("Content-type","application/x-www-form-urlencoded");d.send(e.join("&"))}else showError("Dingen zijn niet ondersteund.. update je browser...")};
function onScrollEvt(){var a=navElem.getBoundingClientRect(),c=groupElem.getBoundingClientRect();if(!menuClick)var b=stafElem.getBoundingClientRect(),d=actiElem.getBoundingClientRect(),e=contElem.getBoundingClientRect(),f=huurElem.getBoundingClientRect();0>=a.top&&c.top<=a.height?navElem.classList.add("nav-sticky-top"):navElem.classList.remove("nav-sticky-top");0>=c.top?$I("landing-page").style.visibility="hidden":$I("landing-page").removeAttribute("style");menuClick||(removeClass("menu-active"),
a.height>=c.top&&a.height<c.bottom&&menu.children[0].classList.add("menu-active"),a.height>=d.top&&a.height<d.bottom&&menu.children[1].classList.add("menu-active"),a.height>=b.top&&a.height<b.bottom&&menu.children[2].classList.add("menu-active"),a.height>=e.top&&a.height<e.bottom&&menu.children[3].classList.add("menu-active"),a.height>=f.top&&a.height<f.bottom&&menu.children[4].classList.add("menu-active"));scrolling=!1}
function requestScroll(){scrolling||requestAnimFrame(onScrollEvt);scrolling=!0}function setScroll(a){window.scrollTo?window.scrollTo(0,a):window.pageYOffset?window.pageYOffset=a:document.documentElement.scrollTop?document.documentElement.scrollTop=a:document.body.scrollTop&&(document.body.scrollTop=a)}
function scrollUp(a){function c(){if(50>g){var a=g;d=-f[0]*(a/=50)*(a-2)+b;var a=d,c=f[1]-1,e=f[1]+1;f[2]?a=a>=c&&a<=e:(a*=-1,a=a>=e&&a<=c);a?(setScroll(f[1]),menuClick=!1):(requestAnimFrame(h),g++)}}a=$I(a).offsetTop;var b,d,e=$I("navigatie").clientHeight,f=[],g=0,h=function(){setScroll(d);c()};b=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;b<a?(f[0]=a-e-b,f[1]=a-e,f[2]=!0):(f[0]=-1*(b-(a-e)),f[1]=-1*(a-e),f[2]=!1);c()}
function showError(a,c){var b="",b=$I("errorMsg")?$I("errorMsg"):document.createElement("div");b.className="error-message";b.id="errorMsg";b.innerHTML='<i class="fa fa-times-circle"></i> '+a;c?$I(c).appendChild(b):console.error(a)}function removeError(){if($I("errorMsg")){var a=$I("errorMsg");a.parentNode.removeChild(a)}}function showSuccess(a,c){showError("tmp",c);$I("errorMsg").innerHTML=a;$I("errorMsg").className="success-message"}
var navElem=$I("navigatie"),groupElem=$I("groepen"),actiElem=$I("activiteiten"),stafElem=$I("staf"),contElem=$I("contact"),huurElem=$I("verhuur"),scrollYpos=window.scrollY,scrolling=!1,menu=$I("menu-links"),menuClick=!1;window.onscroll=function(){scrollYpos=window.scrollY;requestScroll()};$I("arrowDown").onclick=function(){menuClick=!0;removeClass("menu-active");$I("menu-links").children[0].classList.add("menu-active");scrollUp("groepen")};
$I("sv-logo").onclick=function(){removeClass("menu-active");scrollUp("landing-page")};menu.onclick=function(a){var c=a.target.getAttribute("data-link");c&&(menuClick=!0,removeClass("menu-active"),menu.classList.contains("hb-menu-open")&&(menu.classList.toggle("hb-menu-open"),$I("hb-menu-btn-click").classList.toggle("hb-menu-btn-open")),a.target.classList.add("menu-active"),scrollUp(c))};
$I("contact-form").onsubmit=function(){for(var a={},c=/[^\s@]+@[^\s@]+\.[^\s@]+/,b=this.id,d=this.getElementsByClassName("inp"),e=0;e<d.length;e++)a[d[e].name]=d[e].value;a.whoTo||showError("Aan wie moet je vraag/opmerking verstuurd worden?",b);c.test(a.mailadr)||showError("Vul een geldig email adres in.",b);c.test(a.mailadr)&&""!==a.whoTo&&(removeError(),showSuccess("Aanmelding verstsuren...",b),ajax("../php/contact-form.php",a,function(a){$I(b).reset();showSuccess(a,b)}));return!1};
$I("verhuur-tabs").addEventListener("click",function(a){console.info(a.target);removeClass("tab-active");removeClass("tabpanel-active");a.target.classList.add("tab-active");$I(a.target.getAttribute("data-tab")).classList.add("tabpanel-active")});$I("hb-menu-btn-click").onclick=function(){$I("menu-links").classList.toggle("hb-menu-open");this.classList.toggle("hb-menu-btn-open")};
var hired=[],isTodayHired=function(a){var c,b,d=Date.now();if(a){for(var e=0;e<a.length;e++)if(c=Date.parse(a[e].dayFrom),b=Date.parse(a[e].dayTo),b=b===c?b+86399999:b,d<=b&&d>=c)return a[e].bySV?"sv":"other";return!1}};(function(){var a=new Date;ajax("../php/Reservering.php",{d:a.getDate(),m:a.getMonth()+1,y:a.getFullYear()},function(a){try{processHired(JSON.parse(a))}catch(b){console.warn("Er is iets mis gegaan met het ophalen van de reserveringen.",a)}})})();
function processHired(a){var c=$I("mini-verhuur"),b=document.createDocumentFragment(),d,e,f,g,h,k=function(a){a=new Date(a);return"Zo Ma Di Wo Do Vr Za".split(" ")[a.getDay()]+" "+a.getDate()+" "+"Jan Feb Mrt Apr Mei Jun Jul Aug Sep Okt Nov Dec".split(" ")[a.getMonth()]};e=$el("ul");e.classList.add("hide-mobile");for(d=0;d<a.length;d++)f=$el("li"),g=k(a[d].dayFrom),h=k(a[d].dayTo),f.textContent=h===g?"Op: "+g:"Van: "+g+" tot: "+h,e.appendChild(f);b.appendChild(e);d=$el("p");d.classList.add("verhuur-status");
b.appendChild(d);a=isTodayHired(a);d.textContent=a?"sv"===a?"De blokhut wordt gebruikt door Scouting Veghel.":"De blokhut is op dit moment bezet.":"De blokhut is op dit moment vrij.";c.innerHTML="";c.appendChild(b)};
