'use strict';function $I(a){return document.getElementById(a)}function $el(a){return document.createElement(a)}window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();
function removeClass(a){var b=document.getElementsByClassName(a),d;if(0!==b.length)if(1===b.length)b[0].classList.remove(a);else if(1<b.length)for(d=0;d<b.length;d++)b[d].classList.remove(a)}
var ajax=function(a,b,d){var c={};if("undefined"!==typeof XMLHttpRequest){var c=new XMLHttpRequest,e=[],f;for(f in b)e.push(encodeURIComponent(f)+"="+encodeURIComponent(b[f]));c.open("POST",a,!0);c.onreadystatechange=function(){4===c.readyState&&200===c.status&&d(c.responseText)};c.setRequestHeader("Content-type","application/x-www-form-urlencoded");c.send(e.join("&"))}else showError("Dingen zijn niet ondersteund.. update je browser...")};
function onScrollEvt(){var a=navElem.getBoundingClientRect(),b=groupElem.getBoundingClientRect();if(!menuClick)var d=stafElem.getBoundingClientRect(),c=actiElem.getBoundingClientRect(),e=contElem.getBoundingClientRect(),f=huurElem.getBoundingClientRect();0>=a.top&&b.top<=a.height?navElem.classList.add("nav-sticky-top"):navElem.classList.remove("nav-sticky-top");menuClick||(removeClass("menu-active"),a.height>=b.top&&a.height<b.bottom&&menu.children[0].classList.add("menu-active"),a.height>=c.top&&
a.height<c.bottom&&menu.children[1].classList.add("menu-active"),a.height>=d.top&&a.height<d.bottom&&menu.children[2].classList.add("menu-active"),a.height>=e.top&&a.height<e.bottom&&menu.children[3].classList.add("menu-active"),a.height>=f.top&&a.height<f.bottom&&menu.children[4].classList.add("menu-active"));scrolling=!1}function requestScroll(){scrolling||requestAnimFrame(onScrollEvt);scrolling=!0}
function setScroll(a){window.scrollTo?window.scrollTo(0,a):window.pageYOffset?window.pageYOffset=a:document.documentElement.scrollTop?document.documentElement.scrollTop=a:document.body.scrollTop&&(document.body.scrollTop=a)}
function scrollUp(a){function b(){if(50>g){var a=g;c=-f[0]*(a/=50)*(a-2)+d;var a=c,b=f[1]-1,e=f[1]+1;f[2]?a=a>=b&&a<=e:(a*=-1,a=a>=e&&a<=b);a?(setScroll(f[1]),menuClick=!1):(requestAnimFrame(k),g++)}}a=$I(a).offsetTop;var d,c,e=$I("navigatie").clientHeight,f=[],g=0,k=function(){setScroll(c);b()};d=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;d<a?(f[0]=a-e-d,f[1]=a-e,f[2]=!0):(f[0]=-1*(d-(a-e)),f[1]=-1*(a-e),f[2]=!1);b()}
function showError(a,b){var d="",d=$I("errorMsg")?$I("errorMsg"):document.createElement("div");d.className="error-message";d.id="errorMsg";d.innerHTML='<i class="fa fa-times-circle"></i> '+a;b?$I(b).appendChild(d):console.error(a)}function removeError(){if($I("errorMsg")){var a=$I("errorMsg");a.parentNode.removeChild(a)}}function showSuccess(a,b){showError("tmp",b);$I("errorMsg").innerHTML=a;$I("errorMsg").className="success-message"}
function resizeMap(){if($I("map-size")){var a=$I("map-size").clientWidth;$I("kaartje").innerHTML='<img class="info-kaart" alt="Locatie blokhut veghel" src="https://maps.googleapis.com/maps/api/staticmap?center=Dorshout+29,Veghel,NL&zoom=14&size='+a+'x300&scale=2&markers=color:blue%7C51.626782,5.522947&key=AIzaSyCgVa8lEEM_4SaJqtlLgl8QtBytdSSrhlM&sensor=false" />'}}resizeMap();window.addEventListener("resize",resizeMap);
var navElem=$I("navigatie"),groupElem=$I("groepen"),actiElem=$I("activiteiten"),stafElem=$I("staf"),contElem=$I("contact"),huurElem=$I("verhuur"),scrollYpos=window.scrollY,scrolling=!1,menu=$I("menu-links"),menuClick=!1;window.onscroll=function(){scrollYpos=window.scrollY;requestScroll()};$I("arrowDown").onclick=function(){menuClick=!0;removeClass("menu-active");$I("menu-links").children[0].classList.add("menu-active");scrollUp("groepen")};
$I("sv-logo").onclick=function(){removeClass("menu-active");scrollUp("landing-page")};menu.onclick=function(a){var b=a.target.getAttribute("data-link");b&&(menuClick=!0,removeClass("menu-active"),menu.classList.contains("hb-menu-open")&&(menu.classList.toggle("hb-menu-open"),$I("hb-menu-btn-click").classList.toggle("hb-menu-btn-open")),a.target.classList.add("menu-active"),scrollUp(b))};
$I("contact-form").onsubmit=function(){for(var a={},b=/[^\s@]+@[^\s@]+\.[^\s@]+/,d=this.id,c=this.getElementsByClassName("inp"),e=0;e<c.length;e++)a[c[e].name]=c[e].value;a.whoTo||showError("Aan wie moet je vraag/opmerking verstuurd worden?",d);b.test(a.mailadr)||showError("Vul een geldig email adres in.",d);b.test(a.mailadr)&&""!==a.whoTo&&(removeError(),showSuccess("Aanmelding verstsuren...",d),ajax("../php/contact-form.php",a,function(a){$I(d).reset();showSuccess(a,d)}));return!1};
$I("verhuur-tabs").addEventListener("click",function(a){removeClass("tab-active");removeClass("tabpanel-active");a.target.classList.add("tab-active");$I(a.target.getAttribute("data-tab")).classList.add("tabpanel-active")});$I("verhuur-goto-2").addEventListener("click",function(a){a.preventDefault();removeClass("tab-active");removeClass("tabpanel-active");$I("verhuur-stap-2").classList.add("tabpanel-active");$I("verhuur-tabs").children[1].classList.add("tab-active")});
$I("verhuur-goto-3").addEventListener("click",function(a){a.preventDefault();removeClass("tab-active");removeClass("tabpanel-active");$I("verhuur-stap-3").classList.add("tabpanel-active");$I("verhuur-tabs").children[2].classList.add("tab-active")});$I("hb-menu-btn-click").onclick=function(){$I("menu-links").classList.toggle("hb-menu-open");this.classList.toggle("hb-menu-btn-open")};
function checkMinMax(a,b){var d=a.getAttribute("min"),c=a.getAttribute("max");return d<b&&c>b?b:d>=b&&c>b?d:d<b&&c<=b?c:!1}
function verhuurDateTime(){function a(a){"number"===typeof a&&(a=checkMinMax(this,+this.value+a),!1!==a&&(this.value=a))}function b(a){"number"===typeof a&&(this.selectedIndex+=a,-1===this.selectedIndex&&(this.selectedIndex=0))}function d(){f[this.getAttribute("for")].onchange(this.getAttribute("data-plus-it")?1:-1)}var c={j:$I("aankomst-jaar"),m:$I("aankomst-maand"),d:$I("aankomst-dag"),uu:$I("aankomst-uur"),mm:$I("aankomst-minuut")},e={j:$I("vertrek-jaar"),m:$I("vertrek-maand"),d:$I("vertrek-dag"),
uu:$I("vertrek-uur"),mm:$I("vertrek-minuut")},f={"aankomst-jaar":c.j,"aankomst-maand":c.m,"aankomst-dag":c.d,"aankomst-uur":c.uu,"aankomst-minuut":c.mm,"vertrek-jaar":e.j,"vertrek-maand":e.m,"vertrek-dag":e.d,"vertrek-uur":e.uu,"vertrek-minuut":e.mm},g=document.getElementsByClassName("verhuur-label"),k=$I("EllenIkWil1DagHuren");k.onchange=function(){for(var a in e){var b=e[a],d=c[a];this.checked&&("SELECT"!==b.nodeName?b.value=d.value:b.selectedIndex=d.selectedIndex);b.required=!k.checked;b.disabled=
k.checked}};for(var h=0;h<g.length;h++)g[h].addEventListener("click",d);c.m.onchange=b;e.m.onchange=b;c.d.onchange=a;c.j.onchange=a;c.uu.onchange=a;c.mm.onchange=a;e.d.onchange=a;e.j.onchange=a;e.uu.onchange=a;e.mm.onchange=a;g=new Date;h=new Date;h.setDate(h.getDate()+5);c.m.selectedIndex=g.getMonth();e.m.selectedIndex=h.getMonth();c.d.value=g.getDate();e.d.value=h.getDate();c.j.value=g.getFullYear();e.j.value=h.getFullYear();c.uu.value=e.uu.value=g.getHours();c.mm.value=e.mm.value=g.getMinutes()}
verhuurDateTime();var isTodayHired=function(a){var b,d,c=Date.now();if(a){for(var e=0;e<a.length;e++)if(b=Date.parse(a[e].dayFrom),d=Date.parse(a[e].dayTo),d=d===b?d+86399999:d,c<=d&&c>=b)return a[e].bySV?"sv":"other";return!1}};(function(){var a=new Date;ajax("../php/Reservering.php",{d:a.getDate(),m:a.getMonth()+1,y:a.getFullYear()},function(a){try{processHired(JSON.parse(a))}catch(d){console.warn("Er is iets mis gegaan met het ophalen van de reserveringen.",a)}})})();
function processHired(a){var b=$I("mini-verhuur"),d=document.createDocumentFragment(),c,e,f,g,k,h=function(a){a=new Date(a);return"Zo Ma Di Wo Do Vr Za".split(" ")[a.getDay()]+" "+a.getDate()+" "+"Jan Feb Mrt Apr Mei Jun Jul Aug Sep Okt Nov Dec".split(" ")[a.getMonth()]};e=$el("ul");e.classList.add("hide-mobile");for(c=0;c<a.length;c++)f=$el("li"),g=h(a[c].dayFrom),k=h(a[c].dayTo),f.textContent=k===g?"Op: "+g:"Van: "+g+" tot: "+k,e.appendChild(f);d.appendChild(e);c=$el("p");c.classList.add("verhuur-status");
d.appendChild(c);a=isTodayHired(a);c.textContent=a?"sv"===a?"De blokhut wordt gebruikt door Scouting Veghel.":"De blokhut is op dit moment bezet.":"De blokhut is op dit moment vrij.";b.innerHTML="";b.appendChild(d)};
